# GitHub Actions Runner Controller

âš¡ Lightweight, efficient controller for autoscaling self-hosted GitHub Actions runners.

[![Go Version](https://img.shields.io/badge/go-1.21+-blue.svg)](https://golang.org)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

## Why?

GitHub-hosted runners are expensive and limited. Existing solutions like [actions-runner-controller](https://github.com/actions/actions-runner-controller) are complex and Kubernetes-only. This project aims to be:

- **Simple** - Single binary, minimal config, zero dependencies
- **Efficient** - Scales based on actual queue depth
- **Flexible** - Works with Docker, VMs, or bare metal
- **Cost-effective** - Use spot instances, suspend idle runners

## Status

ðŸš§ **Early development** - Core loop works, runner spawning is stubbed. Contributors welcome!

## Quick Start

```bash
# Set required env vars
export GITHUB_TOKEN=ghp_yourtoken
export GITHUB_ORG=your-org  # or GITHUB_REPO=owner/repo

# Run
go run cmd/controller/main.go
```

## Architecture

```
cmd/controller/        # Entry point
internal/
  â”œâ”€â”€ config/         # Environment-based config
  â”œâ”€â”€ controller/     # Reconciliation loop
  â”œâ”€â”€ github/         # GitHub API client (stdlib only)
  â””â”€â”€ runner/         # Runner lifecycle management
```

## Configuration

All config via environment variables (see `config.example.yaml`):

- `GITHUB_TOKEN` - GitHub PAT with `repo` and `admin:org` scopes
- `GITHUB_ORG` or `GITHUB_REPO` - Target org/repo
- `MIN_RUNNERS` / `MAX_RUNNERS` - Scaling bounds
- `SCALE_UP_THRESHOLD` - Queue size to trigger scale up
- `CHECK_INTERVAL_SEC` - Reconciliation frequency

## Roadmap

- [ ] Docker runner implementation
- [ ] VM provider support (AWS, GCP, Azure)
- [ ] Webhook-based scaling (vs polling)
- [ ] Prometheus metrics
- [ ] Runner labels/matching
- [ ] Cost tracking and reporting

## Contributing

See [CONTRIBUTING.md](CONTRIBUTING.md). PRs welcome!

## License

MIT - see [LICENSE](LICENSE)
